
å¼•å…¥ React Query å’Œ Zustand å¹¶ä¸æ˜¯ä¸ºäº†å½»åº•æ¶ˆç­ `useState`ï¼Œè€Œæ˜¯ä¸ºäº†**ç»™ State åˆ†ç±»**ï¼Œè®©ä½ ä¸å†æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å¡è¿› `useState`ï¼ˆæˆ–è€… Reduxï¼‰é‡Œã€‚

åœ¨ä¸€ä¸ªæˆç†Ÿçš„ç°ä»£ React é¡¹ç›®æ¶æ„ä¸­ï¼Œè¿™ä¸‰è€…é€šå¸¸æ˜¯**å…±å­˜**çš„ï¼Œå„å¸å…¶èŒã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬æ¯”ä½œå…¬å¸çš„ä¸åŒéƒ¨é—¨ï¼š

### 1. ğŸŒ React Queryï¼šè´Ÿè´£â€œæœåŠ¡å™¨çŠ¶æ€â€ (Server State)

ä»¥å‰æˆ‘ä»¬å–œæ¬¢æŠŠ API è¯·æ±‚å›æ¥çš„æ•°æ®å­˜åœ¨ Redux æˆ– `useState` é‡Œã€‚ç°åœ¨ï¼Œè¿™éƒ¨åˆ†å·¥ä½œå…¨æƒäº¤ç»™ React Queryã€‚

- **èŒè´£**ï¼šè·å–æ•°æ®ã€ç¼“å­˜ã€åŒæ­¥ã€æ›´æ–°æœåŠ¡å™¨æ•°æ®ã€‚
    
- **ä½ ä¸åº”è¯¥ç”¨ `useState` åšçš„äº‹**ï¼šå­˜å‚¨ä» API è·å–çš„ç”¨æˆ·åˆ—è¡¨ã€å•†å“è¯¦æƒ…ç­‰ã€‚
    
- **ä¾‹å­**ï¼š`const { data } = useQuery(...)`ã€‚
    

### 2. ğŸŒ Zustandï¼šè´Ÿè´£â€œå…¨å±€å®¢æˆ·ç«¯çŠ¶æ€â€ (Global Client State)

è¿™æ˜¯åº”ç”¨çº§åˆ«å…±äº«çš„æ•°æ®ï¼Œä¸”è¿™äº›æ•°æ®**ä¸æ˜¯**æ¥è‡ªæœåŠ¡å™¨çš„ã€‚

- **èŒè´£**ï¼šè·¨ç»„ä»¶å…±äº«çš„ã€æŒä¹…åŒ–çš„ã€æˆ–è€…éœ€è¦åœ¨å¾ˆè¿œçš„åœ°æ–¹è®¿é—®çš„æ•°æ®ã€‚
    
- **ä½ ä¸åº”è¯¥ç”¨ `useState` åšçš„äº‹**ï¼šå­˜å‚¨å½“å‰çš„ä¸»é¢˜ï¼ˆé»‘/ç™½æ¨¡å¼ï¼‰ã€è´­ç‰©è½¦é‡Œçš„å•†å“åˆ—è¡¨ï¼ˆå¦‚æœæ²¡å­˜åç«¯ï¼‰ã€ç”¨æˆ·çš„ç™»å½• Tokenã€å…¨å±€ä¾§è¾¹æ çš„å±•å¼€/æ”¶èµ·çŠ¶æ€ã€‚
    
- **ä¾‹å­**ï¼š`const theme = useStore(state => state.theme)`ã€‚
    

### 3. ğŸ  useStateï¼šè´Ÿè´£â€œå±€éƒ¨ UI çŠ¶æ€â€ (Local UI State)

è¿™æ˜¯ `useState` çš„**çœŸæ­£å½’å®¿**ã€‚è¿™äº›çŠ¶æ€åªå±äºæŸä¸ªå…·ä½“çš„ç»„ä»¶ï¼Œ**å‡ºäº†è¿™ä¸ªç»„ä»¶å°±æ²¡äººå…³å¿ƒäº†**ã€‚

- **èŒè´£**ï¼šæ§åˆ¶ç»„ä»¶å†…éƒ¨çš„äº¤äº’ã€ä¸´æ—¶è¾“å…¥ã€è§†è§‰å˜åŒ–ã€‚
    
- **å¿…é¡»ç”¨ `useState` çš„åœºæ™¯**ï¼š
    
    - è¡¨å•è¾“å…¥ (Controlled Components)ï¼š
        
        ä½ ä¸å¯èƒ½æŠŠæ¯ä¸ª <input /> çš„å€¼éƒ½æ”¾åˆ° Zustand é‡Œï¼Œé‚£æ ·å¤ªé‡äº†ï¼Œæ€§èƒ½ä¹Ÿå·®ã€‚
        
        JavaScript
        
        ```
        const [inputValue, setInputValue] = useState(""); 
        // è¿™ç§åªå±äºå½“å‰è¾“å…¥æ¡†çš„å€¼ï¼Œå¿…é¡»æ˜¯ Local State
        ```
        
    - ç®€å•çš„ UI å¼€å…³ï¼š
        
        æ¯”å¦‚ä¸€ä¸ªå¼¹çª—ï¼ˆModalï¼‰çš„æ‰“å¼€/å…³é—­ï¼Œæˆ–è€…ä¸€ä¸ªä¸‹æ‹‰èœå•çš„å±•å¼€/æ”¶èµ·ã€‚å¦‚æœè¿™ä¸ªå¼¹çª—ä¸éœ€è¦è¢«å…¶ä»–é¡µé¢çš„ç»„ä»¶æ§åˆ¶ï¼Œå®ƒå°±æ˜¯å±€éƒ¨çš„ã€‚
        
        JavaScript
        
        ```
        const [isOpen, setIsOpen] = useState(false);
        ```
        
    - Tab é¡µåˆ‡æ¢ï¼š
        
        å½“å‰é€‰ä¸­çš„æ˜¯ç¬¬å‡ ä¸ª Tabã€‚
        
        JavaScript
        
        ```
        const [activeIndex, setActiveIndex] = useState(0);
        ```
        

---

### ğŸ’¡ ä¸ºä»€ä¹ˆæœ‰äº† Zustand è¿˜è¦ä¿ç•™ `useState`ï¼Ÿ

å¦‚æœä½ æŠŠä¸Šé¢æåˆ°çš„é‚£äº›â€œå±€éƒ¨ UI çŠ¶æ€â€ä¹Ÿéƒ½å¡è¿› Zustandï¼š

1. **æ±¡æŸ“å…¨å±€ Store**ï¼šä½ çš„ Store ä¼šå˜å¾—æå…¶è‡ƒè‚¿ï¼Œé‡Œé¢å¡æ»¡äº† `isModalOpen`, `inputValue`, `tabIndex` ç­‰åƒåœ¾æ•°æ®ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚
    
2. **æ¸…ç†å›°éš¾**ï¼š`useState` éšç€ç»„ä»¶å¸è½½ä¼šè‡ªåŠ¨é”€æ¯ã€‚è€Œ Zustand çš„æ•°æ®æ˜¯å…¨å±€çš„ï¼Œç»„ä»¶å¸è½½åæ•°æ®è¿˜åœ¨ï¼Œä¸‹æ¬¡è¿›æ¥å¯èƒ½è¿˜æ˜¯æ—§çŠ¶æ€ï¼Œä½ è¿˜å¾—æ‰‹åŠ¨å†™ä»£ç å»é‡ç½®å®ƒï¼ˆCleanupï¼‰ã€‚
    
3. **è¿‡åº¦è®¾è®¡**ï¼šæ€é¸¡ç„‰ç”¨ç‰›åˆ€ã€‚ä¸ºäº†æ§åˆ¶ä¸€ä¸ªæŒ‰é’®å˜è‰²è€Œå»å®šä¹‰ Action å’Œ Storeï¼Œå¢åŠ äº†ä¸å¿…è¦çš„å¤æ‚åº¦ã€‚
    

### ğŸ“Š å†³ç­–æŒ‡å—ï¼šæˆ‘è¯¥ç”¨å“ªä¸ªï¼Ÿ

å½“ä½ éœ€è¦å®šä¹‰ä¸€ä¸ªçŠ¶æ€æ—¶ï¼ŒæŒ‰ç…§è¿™ä¸ªé¡ºåºé—®è‡ªå·±ï¼š

1. **è¿™ä¸ªæ•°æ®æ¥è‡ªæœåŠ¡å™¨å—ï¼Ÿ**
    
    - æ˜¯ ğŸ‘‰ **React Query**
        
2. **å¦‚æœä¸æ˜¯æ¥è‡ªæœåŠ¡å™¨ï¼Œè¿™ä¸ªæ•°æ®éœ€è¦åœ¨å¾ˆå¤šä¸ªä¸ç›¸å…³çš„ç»„ä»¶ä¹‹é—´å…±äº«å—ï¼Ÿ**
    
    - æ˜¯ ğŸ‘‰ **Zustand** (æˆ– Context)
        
3. **å¦‚æœæ—¢ä¸æ˜¯æœåŠ¡å™¨æ•°æ®ï¼Œä¹Ÿä¸éœ€è¦å…±äº«ï¼Œåªåœ¨è¿™ä¸ªç»„ä»¶ï¼ˆæˆ–å…¶å­ç»„ä»¶ï¼‰é‡Œç”¨ï¼Ÿ**
    
    - æ˜¯ ğŸ‘‰ **useState** (æˆ– useReducer)
        

### æ€»ç»“ä»£ç ç¤ºä¾‹

åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ï¼Œè¿™ä¸‰è€…ç»å¸¸æ˜¯åŒæ—¶å‡ºç°çš„ï¼š

JavaScript

```
function ProductPage({ productId }) {
  // 1. React Query: å¤„ç†æœåŠ¡å™¨æ•°æ®
  const { data: product, isLoading } = useQuery(['product', productId], fetchProduct);

  // 2. Zustand: è·å–å…¨å±€è´­ç‰©è½¦æ–¹æ³•
  const addToCart = useStore((state) => state.addToCart);

  // 3. useState: å¤„ç†æœ¬åœ° UI äº¤äº’ï¼ˆæ¯”å¦‚å¼¹çª—ï¼‰
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [quantity, setQuantity] = useState(1); // è´­ä¹°æ•°é‡

  if (isLoading) return <div>Loading...</div>;

  return (
    <div>
      <h1>{product.name}</h1>
      
      {/* æœ¬åœ°çŠ¶æ€æ§åˆ¶æ•°é‡ */}
      <input 
        value={quantity} 
        onChange={(e) => setQuantity(e.target.value)} 
      />

      {/* è°ƒç”¨å…¨å±€çŠ¶æ€æ–¹æ³• */}
      <button onClick={() => addToCart(product, quantity)}>
        åŠ å…¥è´­ç‰©è½¦
      </button>

      {/* æœ¬åœ°çŠ¶æ€æ§åˆ¶å¼¹çª— */}
      <button onClick={() => setIsModalOpen(true)}>æŸ¥çœ‹è¯¦æƒ…</button>
      
      {isModalOpen && <Modal onClose={() => setIsModalOpen(false)} />}
    </div>
  );
}
```

æ‰€ä»¥ï¼Œ`useState` ä¸ä¼šè¢«æ·˜æ±°ï¼Œå®ƒåªæ˜¯**å›å½’äº†æœ¬ä½**ï¼Œå»åšå®ƒæœ€æ“…é•¿çš„è½»é‡çº§ UI é€»è¾‘ç®¡ç†äº†ã€‚