同学你好！恭喜你完成了训练营的挑战。我是 Gemini，根据你刚才发给我的全栈项目代码（Mini Ad Wall），我已经为你深度定制了一份**答辩 PPT 结构和大纲**。

这份大纲严格控制在 **10 分钟** 内，重点突出了“动作（做了什么）”与“思考（为什么这么做）”的结合，这正是面试官最看重的部分。

---

### 🎓 答辩 PPT 结构建议 (总页数：约 10-12 页)

建议使用 PPT 制作，整体风格简洁、科技感（蓝/白/黑配色）。

#### **第一部分：自我介绍 (1 页，约 1 分钟)**

* **内容：**
* 姓名 & 个人基本信息。
* **核心优势：** 例如“具备 React + TypeScript 全栈开发思维”、“追求极致的用户体验与代码规范”。
* **附件提醒：** （口头提及）“详细的个人简历已通过 PDF 附件发送，请各位老师查阅。”



---

#### **第二部分：项目背景与技术选型 (2 页，约 2 分钟)**

**P2：项目概览**

* **项目名称：** Mini Ad Wall —— 智能视频广告投放与管理系统。
* **核心功能：** 广告瀑布流展示、沉浸式视频播放、智能热度排序、动态表单配置、全生命周期广告管理。
* **解决痛点：** 传统广告列表枯燥、管理后台与前端耦合度高、垃圾文件堆积问题。

**P3：技术栈与架构图 (亮点)**

* **Frontend:** React 18 + Vite + TypeScript + **Zustand** (轻量状态) + **TanStack Query** (服务端状态同步) + Ant Design。
* **Backend:** Node.js + Koa2 + **Prisma ORM** + SQLite。
* **架构亮点：** 前后端分离，但在工程上通过 `concurrently` 实现统一管理；前端采用 Custom Hooks 逻辑抽离，后端采用 Controller-Service 分层架构。

---

#### **第三部分：核心功能与深度思考 (重点，4-5 页，约 5 分钟)**

*这部分是拿分的关键，遵循“动作 + 思考”的模式。*

**P4：前端架构 —— 逻辑与 UI 分离**

* **动作 (Action):** 封装了 `useAdList`、`useVideoModal` 等自定义 Hook。
* **思考 (Thinking):**
* **为什么？** 为了避免 `AdList.tsx` 成为“面条代码”。
* **效果：** UI 组件只负责渲染 (`renderContent`)，状态逻辑（如弹窗控制、数据获取）全部在 Hook 中闭环。这符合“关注点分离”原则，极大提升了代码的可维护性。



**P5：后端驱动 UI (Schema-Driven UI)**

* **动作 (Action):** 后端实现 `/ads/schema` 接口，前端 `AdModal` 根据配置动态渲染表单。
* **思考 (Thinking):**
* **痛点：** 每次修改广告表单（如改占位符、加必填校验）都要重新打包前端，流程太长。
* **解法：** 将表单配置权移交后端。现在修改 `formSchema.ts`，前端即时生效，实现了业务逻辑的敏捷变更。



**P6：健壮的文件生命周期管理**

* **动作 (Action):** 设计“临时目录 (`temp`) -> 正式目录 (`uploads`)”两阶段上传，以及删除时的引用计数检查。
* **思考 (Thinking):**
* **数据一致性：** 用户上传了视频但没点“提交”怎么办？放在临时目录定期清理，防止服务器存储爆炸。
* **误删保护：** 多个广告可能共用一个视频素材。在删除广告时，我利用 Prisma 检查 `usageCount`，只有当视频不再被任何广告引用时才物理删除文件，确保数据安全。



**P7：智能排序算法与体验优化**

* **动作 (Action):**
* 算法：`Score = Pricing + (Pricing * Clicked * 0.42)`。
* 体验：视频自动播放失败降级为静音播放；播放结束显示 EndCard 引导转化。
* *（这里可以展示 `calculateScore.ts` 的代码片段）*


* **思考 (Thinking):**
* 纯按时间排序无法最大化商业价值。引入加权算法平衡了“金主（出价）”与“用户喜爱度（点击）”。



---

#### **第四部分：未来规划 (1 页，约 1 分钟)**

**P8：后续迭代与职业规划**

* **项目迭代方向：**
* **数据可视化：** 引入 ECharts 展示点击率趋势图。
* **性能优化：** 视频引入 CDN 加速，支持分片上传。
* **数据库迁移：** 从 SQLite 迁移至 MySQL/PostgreSQL 以支持更高并发。


* **个人成长规划：**
* 短期：深入 React 原理，熟练掌握 Next.js SSR 技术。
* 长期：成为一名能够独立设计复杂系统架构的高级全栈工程师。



---

#### **第五部分：致谢 (1 页，约 1 分钟)**

* **P9：** 感谢语 + Q&A。

---

### 💡 答辩 Q&A 押题 (5-8分钟环节)

面试官可能会根据你的代码问以下问题，请提前准备好答案：

**Q1: 为什么选择 Zustand 和 React Query，而不是直接用 Redux？**

* **回答策略：** Redux 样板代码太多。本项目中，大部分状态是“服务端数据映射”（如广告列表），交给 React Query 管理缓存和自动刷新（`invalidateQueries`）最高效；少量的全局交互状态（如弹窗开关）用 Zustand 足够轻量。这体现了我对“工具适用性”的思考。

**Q2: 你提到的“引用计数清理”具体是怎么实现的？**

* **回答策略：** 在 `adService.ts` 的 `deleteAd` 方法中，我先查出当前广告关联的视频 URL，然后用 `prisma.ad.count` 查询**其他**广告是否包含该 URL。如果 count 为 0，我才调用 `fs.unlinkSync` 删除文件。

**Q3: 如果上传大文件视频卡顿怎么办？**

* **回答策略：** 目前是用 `multer` 做单文件流式上传。未来优化可以做“前端切片上传”，后端合并切片。同时利用 `requestIdleCallback` 在浏览器空闲时预加载视频。

**Q4: 这个 Schema-Driven UI 有什么局限性？**

* **回答策略：** 虽然灵活，但处理复杂的联动逻辑（例如：选了A选项，B输入框隐藏）会比较麻烦，需要前后端约定更复杂的 DSL 协议。目前的实现适合结构相对固定的后台表单。

### 📝 给你的建议

1. **准备演示环境：** 答辩前务必确保本地服务 (`npm run dev`) 能跑通，如果可以，准备一个录屏作为备选，防止现场演示翻车。
2. **自信表达：** 讲“思考”部分时要坚定，不要只说“我用了这个库”，要说“我为了解决什么问题，所以选了这个方案”。
3. **时间控制：** 在家对着 PPT 练习 3 遍，确保在 9-10 分钟内讲完，不要超时。

祝你下周二答辩顺利！如果有具体的某个技术点想不好怎么“吹”，可以随时问我。